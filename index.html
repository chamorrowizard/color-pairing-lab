<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Color Pairing Lab</title>

<!-- =====================
     DESIGN TOKENS
===================== -->
<style>
:root {
  --glass-bg: rgba(255,255,255,0.18);
  --glass-border: rgba(255,255,255,0.35);
  --blur: blur(18px);
  --radius: 18px;
  --transition: 0.35s cubic-bezier(.4,0,.2,1);
  --font: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

* {
  box-sizing: border-box;
  font-family: var(--font);
}

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #111, #222);
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background var(--transition);
}

/* =====================
     LAYOUT
===================== */
.app {
  width: min(1100px, 95vw);
  display: grid;
  grid-template-columns: 1fr;
  gap: 24px;
}

.header {
  text-align: center;
}

.header h1 {
  font-size: clamp(1.6rem, 3vw, 2.2rem);
  margin-bottom: 6px;
}

.header p {
  opacity: 0.75;
}

/* =====================
     GLASS PANEL
===================== */
.panel {
  background: var(--glass-bg);
  backdrop-filter: var(--blur);
  border-radius: var(--radius);
  border: 1px solid var(--glass-border);
  padding: 24px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
}

/* =====================
     INPUT
===================== */
.color-input {
  display: flex;
  gap: 12px;
  justify-content: center;
  align-items: center;
}

.color-input input[type="text"] {
  width: 260px;
  padding: 14px 16px;
  border-radius: 14px;
  border: none;
  outline: none;
  font-size: 1rem;
}

.color-input input[type="color"] {
  width: 52px;
  height: 52px;
  border-radius: 14px;
  border: none;
  padding: 0;
  cursor: pointer;
}

/* =====================
     COLOR GRID
===================== */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 18px;
}

.color-card {
  border-radius: 16px;
  padding: 16px;
  transition: transform var(--transition);
}

.color-card:hover {
  transform: translateY(-4px);
}

.color-preview {
  height: 80px;
  border-radius: 12px;
  margin-bottom: 12px;
}

.color-code {
  cursor: pointer;
  font-weight: 600;
  font-size: 0.95rem;
}

.color-code span {
  opacity: 0.7;
  font-size: 0.8rem;
}

/* =====================
     COMPARISON UI
===================== */
.preview-ui {
  display: grid;
  gap: 14px;
}

.mock-card {
  padding: 18px;
  border-radius: 14px;
  background: rgba(255,255,255,0.15);
}

.mock-button {
  padding: 12px 16px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  transition: var(--transition);
}

/* =====================
     FOOTER
===================== */
.footer {
  text-align: center;
  opacity: 0.6;
  font-size: 0.85rem;
}
</style>
</head>

<body>
<div class="app">

  <!-- HEADER -->
  <div class="header">
    <h1>Color Pairing Lab</h1>
    <p>Instant complementary, inverted & AAA-safe contrast colors</p>
  </div>

  <!-- INPUT PANEL -->
  <div class="panel color-input">
    <input type="text" id="colorText" placeholder="#6366F1 or rgb(99,102,241)" />
    <input type="color" id="colorPicker" value="#6366F1"/>
  </div>

  <!-- GENERATED COLORS -->
  <div class="panel grid" id="results"></div>

  <!-- UI COMPARISON -->
  <div class="panel preview-ui" id="previewUI">
    <div class="mock-card" id="mockCard">
      <h3>UI Card Preview</h3>
      <p>This text automatically meets AAA contrast.</p>
      <button class="mock-button" id="mockButton">Primary Action</button>
    </div>
  </div>

  <div class="footer">
    WCAG AAA Contrast • Glassmorphic UI • Copy on Click
  </div>

</div>

<!-- =====================
     JAVASCRIPT LOGIC
===================== -->
<script>
/* ---------------------
   COLOR UTILITIES
--------------------- */
function hexToRgb(hex) {
  hex = hex.replace("#", "");
  if (hex.length === 3) hex = hex.split("").map(c => c + c).join("");
  const num = parseInt(hex, 16);
  return {
    r: (num >> 16) & 255,
    g: (num >> 8) & 255,
    b: num & 255
  };
}

function rgbToHex(r, g, b) {
  return "#" + [r,g,b].map(x => x.toString(16).padStart(2,"0")).join("");
}

function invertColor({r,g,b}) {
  return rgbToHex(255 - r, 255 - g, 255 - b);
}

/* HSL conversion for complementary */
function rgbToHsl(r,g,b) {
  r/=255; g/=255; b/=255;
  const max=Math.max(r,g,b), min=Math.min(r,g,b);
  let h,s,l=(max+min)/2;

  if(max===min){h=s=0;}
  else {
    const d=max-min;
    s=l>0.5? d/(2-max-min):d/(max+min);
    switch(max){
      case r:h=(g-b)/d+(g<b?6:0);break;
      case g:h=(b-r)/d+2;break;
      case b:h=(r-g)/d+4;break;
    }
    h/=6;
  }
  return {h,s,l};
}

function hslToRgb(h,s,l){
  let r,g,b;
  if(s===0){r=g=b=l;}
  else{
    const hue2rgb=(p,q,t)=>{
      if(t<0)t+=1;if(t>1)t-=1;
      if(t<1/6)return p+(q-p)*6*t;
      if(t<1/2)return q;
      if(t<2/3)return p+(q-p)*(2/3-t)*6;
      return p;
    }
    const q=l<0.5?l*(1+s):l+s-l*s;
    const p=2*l-q;
    r=hue2rgb(p,q,h+1/3);
    g=hue2rgb(p,q,h);
    b=hue2rgb(p,q,h-1/3);
  }
  return {
    r:Math.round(r*255),
    g:Math.round(g*255),
    b:Math.round(b*255)
  };
}

/* WCAG Contrast */
function luminance({r,g,b}) {
  const a=[r,g,b].map(v=>{
    v/=255;
    return v<=0.03928? v/12.92 : Math.pow((v+0.055)/1.055,2.4);
  });
  return 0.2126*a[0]+0.7152*a[1]+0.0722*a[2];
}

function contrastRatio(c1,c2){
  const L1=luminance(c1)+0.05;
  const L2=luminance(c2)+0.05;
  return L1>L2?L1/L2:L2/L1;
}

/* ---------------------
   UI UPDATE
--------------------- */
const textInput=document.getElementById("colorText");
const picker=document.getElementById("colorPicker");
const results=document.getElementById("results");
const card=document.getElementById("mockCard");
const button=document.getElementById("mockButton");

function update(colorHex){
  let rgb;
  try {
    if(colorHex.startsWith("#")) rgb=hexToRgb(colorHex);
    else return;
  } catch { return; }

  document.body.style.background=`linear-gradient(135deg, ${colorHex}, #000)`;

  const hsl=rgbToHsl(rgb.r,rgb.g,rgb.b);
  const comp=hslToRgb((hsl.h+0.5)%1,hsl.s,hsl.l);
  const compHex=rgbToHex(comp.r,comp.g,comp.b);
  const invHex=invertColor(rgb);

  const white={r:255,g:255,b:255};
  const black={r:0,g:0,b:0};
  const textColor = contrastRatio(rgb,white)>=7 ? "#FFFFFF" : "#000000";

  results.innerHTML="";
  [
    {label:"Input",hex:colorHex},
    {label:"Complementary",hex:compHex},
    {label:"Inverted",hex:invHex},
    {label:"AAA Text",hex:textColor}
  ].forEach(c=>{
    const el=document.createElement("div");
    el.className="color-card";
    el.innerHTML=`
      <div class="color-preview" style="background:${c.hex}"></div>
      <div class="color-code" onclick="navigator.clipboard.writeText('${c.hex}')">
        ${c.hex} <span>${c.label}</span>
      </div>
    `;
    results.appendChild(el);
  });

  card.style.background=colorHex;
  card.style.color=textColor;
  button.style.background=compHex;
  button.style.color=textColor;
}

picker.addEventListener("input",e=>{
  textInput.value=e.target.value;
  update(e.target.value);
});

textInput.addEventListener("input",e=>{
  picker.value=e.target.value;
  update(e.target.value);
});

update("#6366F1");
</script>
</body>
</html>
